{% if isPrototype is not empty || field[object][filterType].label is not defined %}
{% set isPrototype = ('__name__' == form.vars.name) %}
{% set filterType = form.field.vars.value %}
{% set inGroup = form.var.data.glue is defined and 'and' === form.vars.data.glue %}
{% set isBehavior = fields.behaviors[filterType].label is defined %}

{% if isBehavior %}
    {% set object = 'behaviors' %}
{% else %}
    {% set object = form.vars.data.objet is defined ? form.vars.data.object : 'lead' %}
{% endif %}

<div class="panel{% if inGroup && false === first ? ' in-group' : '' {% endif %}">
    <div class="panel-heading {% if isPrototype is empty && '0' === form.vars.name %} hide{% endif %}">
        <div class="panel-glue col-sm-2 pl-0 ">
            {{ form_widget(form.glue) }}
        </div>
    </div>
    <div class="panel-body">
        <div class="col-xs-6 col-sm-3 field-name">
            <i class="object-icon fa <?php echo $class; ?>" aria-hidden="true"></i> <span><?php echo ($isPrototype) ? '__label__' : $fields[$object][$filterType]['label']; ?></span>
        </div>

        <div class="col-xs-6 col-sm-3 padding-none">
            {{ form_widget(form.operator) }}
        </div>

        {% set hasErrors = form.filter.vars.errors|length ? form.display.vars.errors|length %}
        <div class="col-xs-10 col-sm-5 padding-none{% if hasErrors %} has-error{% endif %}">
            {{ form_widget(form.filter) }}
            {{ form_widget(form.display) }}
            {{ form_errors(form.filter) }}
            {{ form_errors(form.display) }}
        </div>

        <div class="col-xs-2 col-sm-1">
            <a href="javascript: void(0);" class="remove-selected btn btn-default text-danger pull-right"><i class="fa fa-trash-o"></i></a>
        </div>
        {{ form_widget(form.field) }}
        {{ form_widget(form.type) }}
        {{ form_widget(form.object) }}
    </div>
</div>
{% endif %}
